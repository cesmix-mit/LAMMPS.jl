<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · LAMMPS.jl</title><meta name="title" content="API · LAMMPS.jl"/><meta property="og:title" content="API · LAMMPS.jl"/><meta property="twitter:title" content="API · LAMMPS.jl"/><meta name="description" content="Documentation for LAMMPS.jl."/><meta property="og:description" content="Documentation for LAMMPS.jl."/><meta property="twitter:description" content="Documentation for LAMMPS.jl."/><meta property="og:url" content="https://cesmix-mit.github.io/LAMMPS.jl/api/"/><meta property="twitter:url" content="https://cesmix-mit.github.io/LAMMPS.jl/api/"/><link rel="canonical" href="https://cesmix-mit.github.io/LAMMPS.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">LAMMPS.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../generated/snap/">Basic SNAP</a></li><li><a class="tocitem" href="../generated/fitting_snap/">Fitting SNAP</a></li></ul></li><li class="is-active"><a class="tocitem" href>API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/main/docs/src/api.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.FixExternal" href="#LAMMPS.FixExternal"><code>LAMMPS.FixExternal</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FixExternal(callback, lmp::LMP, name::String, group::String, ncall::Int, napply::Int)</code></pre><p>Creates a fix in lammps that calls a Julia function <code>callback</code> every <code>ncall</code> during the simulation.</p><div class="admonition is-info" id="lammps-commands-d9402f2e4fa1235c"><header class="admonition-header">lammps commands<a class="admonition-anchor" href="#lammps-commands-d9402f2e4fa1235c" title="Permalink"></a></header><div class="admonition-body"><p>The following command is executed in LAMMPS when <code>FixExternal</code> is called in order to setup the fix:</p><pre><code class="language-lammps hljs">fix &lt;name&gt; &lt;group&gt; external pf/callback &lt;ncall&gt; &lt;napply&gt;</code></pre></div></div><p>The <code>FixExternal</code> object gets passed to the <code>callback</code> function, it contains the parameters passed to <code>FixExternal</code> as fields:</p><ul><li><code>lmp::LMP</code>: The LAMMPS object.</li><li><code>name::String</code>: The name of the fix.</li><li><code>group::String</code>: The group of atoms to which the fix is applied.</li><li><code>ncall::Int</code>: The number of timesteps between calls to the callback function.</li><li><code>napply::Int</code>: The number of times the callback function is applied to the atoms in the group.</li></ul><p>Additionally, the following fields are set by the callback function:</p><ul><li><code>timestep::Int</code>: The current timestep of the simulation.</li><li><code>nlocal::Int</code>: The number of local atoms on the MPI rank.</li><li><code>ids::UnsafeArray{Int32, 1}</code>: The IDs of the local atoms in an <code>nall</code>-element Vector.</li><li><code>x::UnsafeArray{Float64, 2}</code>: The positions of the local atoms in a (3 × <code>nall</code>) Matrix.</li><li><code>f::UnsafeArray{Float64, 2}</code>: The forces on the local atoms in a (3 × <code>nlocal</code>) Matrix.</li></ul><p>These values are only valid during the callback execution and should <em>not</em> be used outside of it, as they refer directly to LAMMPS internal memory.</p><p>Here, the intention is for the callback to write forces to the <code>f</code> field, which will be applied to the atoms in the group every <code>napply</code> timesteps. <code>f</code> is <em>not</em> zeroed before the callback is called, so the forces from previous calls are preserved.</p><div class="admonition is-info" id="ghost-atoms-c66ab5c73089eddb"><header class="admonition-header">ghost atoms<a class="admonition-anchor" href="#ghost-atoms-c66ab5c73089eddb" title="Permalink"></a></header><div class="admonition-body"><p><code>FixExternal</code> is invoked at the <code>post_force</code> stage of each timestep. Modified data of the ghost atoms will <em>not</em> be communicated back to the processor owning the respective atom, as at this point the <code>reverse_comm</code> stage of the timestep has already happened.</p></div></div><p>Contributions to the per-atom energies or virials can be set with <a href="#LAMMPS.set_energy!-Tuple{FixExternal, AbstractVector{Float64}}"><code>set_energy!</code></a> and <a href="#LAMMPS.set_virial!-Tuple{FixExternal, AbstractVector{StaticArraysCore.SVector{6, Float64}}}"><code>set_virial!</code></a>, respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/external.jl#L3-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.InteractionConfig" href="#LAMMPS.InteractionConfig"><code>LAMMPS.InteractionConfig</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">InteractionConfig(;
    system::Type{&lt;:NamedTuple} = @NamedTuple{},
    atom::Type{&lt;:NamedTuple} = @NamedTuple{type::Int32},
    backend::Union{Nothing, AbstractADType} = nothing
)</code></pre><p>A configuration struct that encapsulates the system properties, atom properties, and an optional differentiation backend for use in external pair interactions.</p><p><strong>Fields</strong></p><ul><li><code>system</code>: A <code>NamedTuple</code> type that defines the global system properties to be extracted from LAMMPS. Defaults to an empty <code>NamedTuple</code>.   A list of the available global properties can be found in the <a href="https://docs.lammps.org/Library_properties.html#_CPPv421lammps_extract_globalPvPKc">LAMMPS documentation</a></li><li><code>atom</code>: A <code>NamedTuple</code> type that defines the per-atom properties to be extracted from LAMMPS. Defaults to <code>@NamedTuple{type::Int32}</code>.   A list of the available atom properties can be found in the <a href="https://docs.lammps.org/Classes_atom.html#_CPPv4N9LAMMPS_NS4Atom7extractEPKc">LAMMPS documentation</a></li><li><code>backend</code>: An optional automatic differentiation backend used to automatically calculate interaction forces from a potential function. Defaults to <code>nothing</code>.   The backends are defined through the <a href="https://docs.sciml.ai/ADTypes/stable/"><code>ADTypes</code> package</a>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">config = InteractionConfig(
    system = @NamedTuple{qqrd2e::Float64, boltz::Float64},
    atom = @NamedTuple{type::Int32, q::Float64},
    backend = nothing
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/external.jl#L272-L297">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.LMP" href="#LAMMPS.LMP"><code>LAMMPS.LMP</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LMP(f::Function, args=String[], comm=MPI.COMM_WORLD)</code></pre><p>Create a new LAMMPS instance and call <code>f</code> on that instance while returning the result from <code>f</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L229-L233">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.LMP" href="#LAMMPS.LMP"><code>LAMMPS.LMP</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LMP(args::Vector{String}=String[], comm::MPI.Comm=MPI.COMM_WORLD)</code></pre><p>Create a new LAMMPS instance while passing in a list of strings as if they were command-line arguments for the LAMMPS executable.</p><p>A full ist of command-line options can be found in the <a href="https://docs.lammps.org/Run_options.html">lammps documentation</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L163-L169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.PairExternal-Union{Tuple{U}, Tuple{T}, Tuple{F}, Tuple{F, LMP, InteractionConfig{T, U}, Float64}} where {F, T, U}" href="#LAMMPS.PairExternal-Union{Tuple{U}, Tuple{T}, Tuple{F}, Tuple{F, LMP, InteractionConfig{T, U}, Float64}} where {F, T, U}"><code>LAMMPS.PairExternal</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PairExternal(compute_potential, lmp::LMP, config::InteractionConfig, cutoff::Float64)</code></pre><p>Defines a custom pair style in LAMMPS using a user-provided potential function.</p><div class="admonition is-warning" id="limitations-4dadc3e3375b5784"><header class="admonition-header">limitations<a class="admonition-anchor" href="#limitations-4dadc3e3375b5784" title="Permalink"></a></header><div class="admonition-body"><p><code>PairExternal</code> is implemented as a <code>FixExternal</code> and only works with <code>newton off</code>. Fixes that operate on forces, energies, or virials should also be defined <em>after</em> calling <code>PairExternal</code>. Furthermore, it is not possible to define multiple <code>PairExternals</code> for a simulation. Attempting to do this will overwrite the previously defined <code>PairExternal</code>. </p></div></div><div class="admonition is-info" id="lammps-commands-54c7f7f0fdfffc3d"><header class="admonition-header">lammps commands<a class="admonition-anchor" href="#lammps-commands-54c7f7f0fdfffc3d" title="Permalink"></a></header><div class="admonition-body"><p>The following commands are executed in LAMMPS during the setup process of <code>PairExternal</code>:</p><pre><code class="language-lammps hljs">fix pair_julia all external pf/callback 1 1
pair_style zero &lt;cutoff&gt; nocoeff
pair_coeff * *
newton off &lt;newton_bond&gt; # turns off newton_pair while leaving newton_bond unchanged</code></pre></div></div><p><code>compute_potential</code> should have the following signature:</p><pre><code class="language-julia hljs">function compute_potential(r::Real, system::config.system, iatom::config.atom, jatom::config.atom)</code></pre><p>If no differentiation backend is provided through <code>config</code>, the function should return a tuple of the pair energy and force magnitude. Otherwise it should return only the energy.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># without automatic differentiation
config = InteractionConfig(
    system = @NamedTuple{qqrd2e::Float64},
    atom = @NamedTuple{q::Float64},
)

PairExternal(lmp, config, 2.5) do r, system, iatom, jatom
    energy = system.qqrd2e * (iatom.q * jatom.q) / r
    force = system.qqrd2e * (iatom.q * jatom.q) / r^2
    return energy, force
end

# with automatic differentiation
import ADTypes: AutoEnzyme()
import Enzyme

config = InteractionConfig(
    system = @NamedTuple{qqrd2e::Float64},
    atom = @NamedTuple{q::Float64},
    backend = AutoEnzyme(),
)

PairExternal(lmp, config, 2.5) do r, system, iatom, jatom
    system.qqrd2e * (iatom.q * jatom.q) / r
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/external.jl#L312-L368">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.close!-Tuple{LMP}" href="#LAMMPS.close!-Tuple{LMP}"><code>LAMMPS.close!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">close!(lmp::LMP)</code></pre><p>Shutdown a LAMMPS instance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L215-L219">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.command-Tuple{LMP, Union{String, Array{String}}}" href="#LAMMPS.command-Tuple{LMP, Union{String, Array{String}}}"><code>LAMMPS.command</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">command(lmp::LMP, cmd::Union{String, Array{String}})</code></pre><p>Process LAMMPS input commands from a String or from an Array of Strings.</p><p>A full list of commands can be found in the <a href="https://docs.lammps.org/commands_list.html">lammps documentation</a>.</p><p>This function processes a multi-line string similar to a block of commands from a file. The string may have multiple lines (separated by newline characters) and also single commands may be distributed over multiple lines with continuation characters (’&amp;’). Those lines are combined by removing the ‘&amp;’ and the following newline character. After this processing the string is handed to LAMMPS for parsing and executing.</p><p>Arrays of Strings get concatenated into a single String inserting newline characters as needed.</p><div class="admonition is-compat" id="LAMMPS.jl-0.4.1-6e428d489636126c"><header class="admonition-header">LAMMPS.jl 0.4.1<a class="admonition-anchor" href="#LAMMPS.jl-0.4.1-6e428d489636126c" title="Permalink"></a></header><div class="admonition-body"><p>Multiline string support <code>&quot;&quot;&quot;</code> and support for array of strings was added. Prior versions of LAMMPS.jl ignore newline characters.</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia hljs">LMP([&quot;-screen&quot;, &quot;none&quot;]) do lmp
    command(lmp, &quot;&quot;&quot;
        atom_modify map yes
        region cell block 0 2 0 2 0 2
        create_box 1 cell
        lattice sc 1
        create_atoms 1 region cell
        mass 1 1

        group a id 1 2 3 5 8
        group even id 2 4 6 8
        group odd id 1 3 5 7
    &quot;&quot;&quot;)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L279-L316">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.compute_neighborlist-Tuple{LMP, String}" href="#LAMMPS.compute_neighborlist-Tuple{LMP, String}"><code>LAMMPS.compute_neighborlist</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_neighborlist(lmp::LMP, id::String; request=0)</code></pre><p>Retrieve neighbor list requested by a compute.</p><p>The neighbor list request from a compute is identified by the compute ID and the request ID. The request ID is typically 0, but will be &gt; 0 in case a compute has multiple neighbor list requests.</p><p>Each neighbor list contains vectors of local indices of neighboring atoms. These can be used to index into Arrays returned from <code>extract_atom</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L1070-L1080">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.create_atoms-Tuple{LMP, AbstractMatrix{Float64}, Vector{Int32}, Vector{Int32}}" href="#LAMMPS.create_atoms-Tuple{LMP, AbstractMatrix{Float64}, Vector{Int32}, Vector{Int32}}"><code>LAMMPS.create_atoms</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_atoms(
    lmp::LMP, x::AbstractMatrix{Float64}, id::Vector{Int32}, types::Vector{Int32};
    v::Union{Nothing,Matrix{Float64}}=nothing,
    image::Union{Nothing,Vector{IMAGEINT}}=nothing,
    bexpand::Bool=false
)</code></pre><p>Create atoms for a LAMMPS instance.  <code>x</code> contains the atom positions and should be a 3 by <code>n</code> <code>Matrix{Float64}</code>, where <code>n</code> is the number of atoms.  <code>id</code> contains the id of each atom and should be a length <code>n</code> <code>Vector{Int32}</code>. <code>types</code> contains the atomic type (LAMMPS number) of each atom and should be a length <code>n</code> <code>Vector{Int32}</code>. <code>v</code> contains the associated velocities and should be a 3 by <code>n</code> <code>Matrix{Float64}</code>. <code>image</code> contains the image flags for each atom and should be a length <code>n</code> <code>Vector{IMAGEINT}</code>. <code>bexpand</code> is a <code>Bool</code> that defines whether or not the box should be expanded to fit the input atoms (default not).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L333-L348">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.decode_image_flags-Tuple{Any}" href="#LAMMPS.decode_image_flags-Tuple{Any}"><code>LAMMPS.decode_image_flags</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decode_image_flags(image)</code></pre><p>Decode a single image flag integer into three regular integers.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L616-L620">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.encode_image_flags-Tuple{Any, Any, Any}" href="#LAMMPS.encode_image_flags-Tuple{Any, Any, Any}"><code>LAMMPS.encode_image_flags</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">encode_image_flags(ix, iy, iz)
encode_image_flags(flags)</code></pre><p>Encode three integer image flags into a single imageint.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L607-L612">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.extract_atom-Tuple{LMP, String, LAMMPS._LMP_DATATYPE}" href="#LAMMPS.extract_atom-Tuple{LMP, String, LAMMPS._LMP_DATATYPE}"><code>LAMMPS.extract_atom</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_atom(lmp::LMP, name::String, lmp_type::_LMP_DATATYPE; with_ghosts=false)</code></pre><p>Extract per-atom data from the lammps instance.</p><table><tr><th style="text-align: left">valid values for <code>lmp_type</code>:</th><th style="text-align: left">resulting return type:</th></tr><tr><td style="text-align: left"><code>LAMMPS_INT</code></td><td style="text-align: left"><code>UnsafeArray{Int32, 1}</code></td></tr><tr><td style="text-align: left"><code>LAMMPS_INT_2D</code></td><td style="text-align: left"><code>UnsafeArray{Int32, 2}</code></td></tr><tr><td style="text-align: left"><code>LAMMPS_DOUBLE</code></td><td style="text-align: left"><code>UnsafeArray{Float64, 1}</code></td></tr><tr><td style="text-align: left"><code>LAMMPS_DOUBLE_2D</code></td><td style="text-align: left"><code>UnsafeArray{Float64, 2}</code></td></tr><tr><td style="text-align: left"><code>LAMMPS_INT64</code></td><td style="text-align: left"><code>UnsafeArray{Int64, 1}</code></td></tr><tr><td style="text-align: left"><code>LAMMPS_INT64_2D</code></td><td style="text-align: left"><code>UnsafeArray{Int64, 2}</code></td></tr></table><div class="admonition is-info" id="Info-822b4adc4e932ab2"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-822b4adc4e932ab2" title="Permalink"></a></header><div class="admonition-body"><p>The returned data may become invalid if a re-neighboring operation is triggered at any point after calling this method. If this has happened, trying to read from this data will likely cause julia to crash. To prevent this, copy the returned data</p></div></div><p>A table with suported name keywords can be found in the <a href="https://docs.lammps.org/Classes_atom.html#_CPPv4N9LAMMPS_NS4Atom7extractEPKc">lammps documentation</a>.</p><p><strong>Arguments</strong></p><ul><li><code>with_ghosts</code>: Determines wheter entries for ghost atoms are included. This is ignored for &quot;mass&quot;, or when there is no ghost atom data available.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L548-L572">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.extract_box-Tuple{LMP}" href="#LAMMPS.extract_box-Tuple{LMP}"><code>LAMMPS.extract_box</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_box(lmp::LMP)</code></pre><p>Extract simulation box parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L517-L521">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.extract_compute-Tuple{LMP, String, LAMMPS.API._LMP_STYLE_CONST, LAMMPS._LMP_TYPE}" href="#LAMMPS.extract_compute-Tuple{LMP, String, LAMMPS.API._LMP_STYLE_CONST, LAMMPS._LMP_TYPE}"><code>LAMMPS.extract_compute</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_compute(lmp::LMP, name::String, style::_LMP_STYLE_CONST, lmp_type::_LMP_TYPE)</code></pre><p>Extract data provided by a compute command identified by the compute-ID. Computes may provide global, per-atom, or local data, and those may be a scalar, a vector or an array. Since computes may provide multiple kinds of data, it is required to set style and type flags representing what specific data is desired.</p><table><tr><th style="text-align: left">valid values for <code>style</code>:</th></tr><tr><td style="text-align: left"><code>STYLE_GLOBAL</code></td></tr><tr><td style="text-align: left"><code>STYLE_ATOM</code></td></tr><tr><td style="text-align: left"><code>STYLE_LOCAL</code></td></tr></table><table><tr><th style="text-align: left">valid values for <code>lmp_type</code>:</th><th style="text-align: left">resulting return type:</th></tr><tr><td style="text-align: left"><code>TYPE_SCALAR</code></td><td style="text-align: left"><code>UnsafeArray{Float64, 0}</code></td></tr><tr><td style="text-align: left"><code>TYPE_VECTOR</code></td><td style="text-align: left"><code>UnsafeArray{Float64, 1}</code></td></tr><tr><td style="text-align: left"><code>TYPE_ARRAY</code></td><td style="text-align: left"><code>UnsafeArray{Float64, 2}</code></td></tr></table><p>Scalar values get returned as arrays with a single element. This way it&#39;s possible to modify the internal state of the LAMMPS instance even if the data is scalar.</p><div class="admonition is-info" id="Info-6b77f2e77bf93030"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-6b77f2e77bf93030" title="Permalink"></a></header><div class="admonition-body"><p>The returned data may become invalid as soon as another LAMMPS command has been issued at any point after calling this method. If this has happened, trying to read from this data will likely cause julia to crash. To prevent this, copy the returned data.</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia hljs">LMP([&quot;-screen&quot;, &quot;none&quot;]) do lmp
    extract_compute(lmp, &quot;thermo_temp&quot;, LMP_STYLE_GLOBAL, TYPE_SCALAR) |&gt; println # [0.0]
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L627-L661">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.extract_global-Tuple{LMP, String, LAMMPS._LMP_DATATYPE}" href="#LAMMPS.extract_global-Tuple{LMP, String, LAMMPS._LMP_DATATYPE}"><code>LAMMPS.extract_global</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_global(lmp::LMP, name::String, lmp_type::_LMP_DATATYPE)</code></pre><p>Extract a global property from a LAMMPS instance.</p><table><tr><th style="text-align: left">valid values for <code>lmp_type</code>:</th><th style="text-align: left">resulting return type:</th></tr><tr><td style="text-align: left"><code>LAMMPS_INT</code></td><td style="text-align: left"><code>UnsafeArray{Int32, 1}</code></td></tr><tr><td style="text-align: left"><code>LAMMPS_DOUBLE</code></td><td style="text-align: left"><code>UnsafeArray{Float64, 1}</code></td></tr><tr><td style="text-align: left"><code>LAMMPS_INT64</code></td><td style="text-align: left"><code>UnsafeArray{Int64, 1}</code></td></tr><tr><td style="text-align: left"><code>LAMMPS_STRING</code></td><td style="text-align: left"><code>String</code></td></tr></table><p>Scalar values get returned as a vector with a single element. This way it&#39;s possible to modify the internal state of the LAMMPS instance even if the data is scalar.</p><div class="admonition is-info" id="Info-b09269996fb660aa"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-b09269996fb660aa" title="Permalink"></a></header><div class="admonition-body"><p>Closing the LAMMPS instance or issuing a clear command after calling this method will result in the returned data becoming invalid. To prevent this, copy the returned data.</p></div></div><div class="admonition is-warning" id="Warning-f6bb6aa32e21baa"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-f6bb6aa32e21baa" title="Permalink"></a></header><div class="admonition-body"><p>Modifying the data through <code>extract_global</code> may lead to inconsistent internal data and thus may cause failures or crashes or bogus simulations. In general it is thus usually better to use a LAMMPS input command that sets or changes these parameters. Those will take care of all side effects and necessary updates of settings derived from such settings.</p></div></div><p>A full list of global variables can be found in the <a href="https://docs.lammps.org/Library_properties.html">lammps documentation</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L454-L479">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.extract_setting-Tuple{LMP, String}" href="#LAMMPS.extract_setting-Tuple{LMP, String}"><code>LAMMPS.extract_setting</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_setting(lmp::LMP, name::String)::Int32</code></pre><p>Query LAMMPS about global settings.</p><p>A full list of settings can be found in the <a href="https://docs.lammps.org/Library_properties.html">lammps documentation</a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">    LMP([&quot;-screen&quot;, &quot;none&quot;]) do lmp
        command(lmp, &quot;&quot;&quot;
            region cell block 0 3 0 3 0 3
            create_box 1 cell
            lattice sc 1
            create_atoms 1 region cell
        &quot;&quot;&quot;)

        extract_setting(lmp, &quot;dimension&quot;) |&gt; println # 3
        extract_setting(lmp, &quot;nlocal&quot;) |&gt; println # 27
    end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L426-L447">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.extract_variable" href="#LAMMPS.extract_variable"><code>LAMMPS.extract_variable</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_variable(lmp::LMP, name::String, lmp_variable::LMP_VARIABLE, group::Union{String, Nothing}=nothing)</code></pre><p>Extracts the data from a LAMMPS variable. When the variable is either an <code>equal</code>-style compatible variable, a <code>vector</code>-style variable, or an <code>atom</code>-style variable, the variable is evaluated and the corresponding value(s) returned. Variables of style <code>internal</code> are compatible with <code>equal</code>-style variables, if they return a numeric value. For other variable styles, their string value is returned.</p><table><tr><th style="text-align: left">valid values for <code>lmp_variable</code>:</th><th style="text-align: left">return type</th></tr><tr><td style="text-align: left"><code>VAR_ATOM</code></td><td style="text-align: left"><code>Vector{Float64}</code>(copy)</td></tr><tr><td style="text-align: left"><code>VAR_EQUAL</code></td><td style="text-align: left"><code>Float64</code></td></tr><tr><td style="text-align: left"><code>VAR_STRING</code></td><td style="text-align: left"><code>String</code></td></tr><tr><td style="text-align: left"><code>VAR_VECTOR</code></td><td style="text-align: left"><code>UnsafeArray{Float64, 1}</code></td></tr></table><p>the kwarg <code>group</code> determines for which atoms the variable will be extracted. It&#39;s only aplicable for <code>VAR_ATOM</code> and will cause an error if used for other variable types. The entires for all atoms not in the group will be zeroed out. By default, all atoms will be extracted.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L696-L714">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.fix_neighborlist-Tuple{LMP, String}" href="#LAMMPS.fix_neighborlist-Tuple{LMP, String}"><code>LAMMPS.fix_neighborlist</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fix_neighborlist(lmp::LMP, id::String; request=0)</code></pre><p>Retrieve neighbor list requested by a fix.</p><p>The neighbor list request from a fix is identified by the fix ID and the request ID. The request ID is typically 0, but will be &gt; 0 in case a fix has multiple neighbor list requests.</p><p>Each neighbor list contains vectors of local indices of neighboring atoms. These can be used to index into Arrays returned from <code>extract_atom</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L1087-L1097">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.gather" href="#LAMMPS.gather"><code>LAMMPS.gather</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">gather(lmp::LMP, name::String, T::Union{Type{Int32}, Type{Float64}}, ids::Union{Nothing, Array{Int32}}=nothing)</code></pre><p>Gather the named per-atom, per-atom fix, per-atom compute, or fix property/atom-based entities from all processes. By default (when <code>ids=nothing</code>), this method collects data from all atoms in consecutive order according to their IDs. The optional parameter <code>ids</code> determines for which subset of atoms the requested data will be gathered. The returned data will then be ordered according to <code>ids</code></p><p>Compute entities have the prefix <code>c_</code>, fix entities use the prefix <code>f_</code>, and per-atom entites have no prefix.</p><p>The returned Array is decoupled from the internal state of the LAMMPS instance.</p><div class="admonition is-warning" id="ids-7af60a7f03d945d9"><header class="admonition-header">ids<a class="admonition-anchor" href="#ids-7af60a7f03d945d9" title="Permalink"></a></header><div class="admonition-body"><p>The optional parameter <code>ids</code> only works, if there is a map defined. For example by doing: <code>command(lmp, &quot;atom_modify map yes&quot;)</code> However, LAMMPS only issues a warning if that&#39;s the case, which unfortuately cannot be detected through the underlying API. Starting form LAMMPS version <code>17 Apr 2024</code> this should no longer be an issue, as LAMMPS then throws an error instead of a warning.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L778-L794">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.gather_angles-Tuple{LMP}" href="#LAMMPS.gather_angles-Tuple{LMP}"><code>LAMMPS.gather_angles</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">gather_angles(lmp::LMP)</code></pre><p>Gather the list of all angles into a 4 x nangles Matrix:</p><pre><code class="nohighlight hljs">row1 -&gt; angle type
row2 -&gt; atom 1
row3 -&gt; atom 2
row4 -&gt; atom 3</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L931-L941">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.gather_bonds-Tuple{LMP}" href="#LAMMPS.gather_bonds-Tuple{LMP}"><code>LAMMPS.gather_bonds</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">gather_bonds(lmp::LMP)</code></pre><p>Gather the list of all bonds into a 3 x nbonds Matrix:</p><pre><code class="nohighlight hljs">row1 -&gt; bond type
row2 -&gt; atom 1
row3 -&gt; atom 2</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L914-L923">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.gather_dihedrals-Tuple{LMP}" href="#LAMMPS.gather_dihedrals-Tuple{LMP}"><code>LAMMPS.gather_dihedrals</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">gather_dihedrals(lmp::LMP)</code></pre><p>Gather the list of all dihedrals into a 5 x ndihedrals Matrix:</p><pre><code class="nohighlight hljs">row1 -&gt; dihedral type
row2 -&gt; atom 1
row3 -&gt; atom 2
row4 -&gt; atom 3
row5 -&gt; atom 4</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L949-L960">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.gather_impropers-Tuple{LMP}" href="#LAMMPS.gather_impropers-Tuple{LMP}"><code>LAMMPS.gather_impropers</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">gather_impropers(lmp::LMP)</code></pre><p>Gather the list of all impropers into a 5 x nimpropers Matrix:</p><pre><code class="nohighlight hljs">row1 -&gt; improper type
row2 -&gt; atom 1
row3 -&gt; atom 2
row4 -&gt; atom 3
row5 -&gt; atom 4</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L968-L979">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.get_category_ids" href="#LAMMPS.get_category_ids"><code>LAMMPS.get_category_ids</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_category_ids(lmp::LMP, category::String, buffer_size::Integer=50)</code></pre><p>Look up the names of entities within a certain category.</p><p>Valid categories are: compute, dump, fix, group, molecule, region, and variable. names longer than <code>buffer_size</code> will be truncated to fit inside the buffer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L1015-L1022">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.get_mpi_comm-Tuple{LMP}" href="#LAMMPS.get_mpi_comm-Tuple{LMP}"><code>LAMMPS.get_mpi_comm</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_mpi_comm(lmp::LMP)::Union{Nothing, MPI.Comm}</code></pre><p>Return the MPI communicator used by the lammps instance or <code>nothing</code> if the lammps build doesn&#39;t support MPI.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L244-L248">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.get_natoms-Tuple{LMP}" href="#LAMMPS.get_natoms-Tuple{LMP}"><code>LAMMPS.get_natoms</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_natoms(lmp::LMP)::Int64</code></pre><p>Get the total number of atoms in the LAMMPS instance.</p><p>Will be precise up to 53-bit signed integer due to the underlying <code>lammps_get_natoms</code> returning a Float64.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L381-L388">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.group_to_atom_ids-Tuple{LMP, String}" href="#LAMMPS.group_to_atom_ids-Tuple{LMP, String}"><code>LAMMPS.group_to_atom_ids</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">group_to_atom_ids(lmp::LMP, group::String)</code></pre><p>Find the IDs of the Atoms in the group.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L987-L991">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.locate-Tuple{}" href="#LAMMPS.locate-Tuple{}"><code>LAMMPS.locate</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">locate()</code></pre><p>Locate the LAMMPS library currently being used, by LAMMPS.jl</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L123-L127">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.pair_neighborlist-Tuple{LMP, String}" href="#LAMMPS.pair_neighborlist-Tuple{LMP, String}"><code>LAMMPS.pair_neighborlist</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">pair_neighborlist(lmp::LMP, style::String; exact=false, nsub=0, request=0)</code></pre><p>This function determines which of the available neighbor lists for pair styles matches the given conditions. It first matches the style name. If exact is true the name must match exactly, if exact is false, a regular expression or sub-string match is done. If the pair style is hybrid or hybrid/overlay the style is matched against the sub styles instead. If a the same pair style is used multiple times as a sub-style, the nsub argument must be &gt; 0 and represents the nth instance of the sub-style (same as for the pair_coeff command, for example). In that case nsub=0 will not produce a match and this function will Error.</p><p>The final condition to be checked is the request ID (reqid). This will normally be 0, but some pair styles request multiple neighbor lists and set the request ID to a value &gt; 0.</p><p>Each neighbor list contains vectors of local indices of neighboring atoms. These can be used to index into Arrays returned from <code>extract_atom</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">lmp = LMP()

command(lmp, &quot;&quot;&quot;
    region cell block 0 3 0 3 0 3
    create_box 1 cell
    lattice sc 1
    create_atoms 1 region cell
    mass 1 1

    pair_style zero 1.0
    pair_coeff * *

    run 1
&quot;&quot;&quot;)

x = extract_atom(lmp, &quot;x&quot;, LAMMPS_DOUBLE_2D; with_ghosts=true)

for (iatom, neighs) in pair_neighborlist(lmp, &quot;zero&quot;)
    for jatom in neighs
        ix = @view x[:, iatom]
        jx = @view x[:, jatom]

        println(ix =&gt; jx)
   end
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L1104-L1145">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.reset_box" href="#LAMMPS.reset_box"><code>LAMMPS.reset_box</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reset_box(lmp::LMP, boxlo, boxhi, xy::Real = 0, yz::Real = 0, xz::Real = 0)</code></pre><p>Reset simulation box parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L536-L540">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.scatter!-Union{Tuple{T}, Tuple{LMP, String, AbstractVecOrMat{T}}, Tuple{LMP, String, AbstractVecOrMat{T}, Union{Nothing, Array{Int32}}}} where T&lt;:Union{Float64, Int32}" href="#LAMMPS.scatter!-Union{Tuple{T}, Tuple{LMP, String, AbstractVecOrMat{T}}, Tuple{LMP, String, AbstractVecOrMat{T}, Union{Nothing, Array{Int32}}}} where T&lt;:Union{Float64, Int32}"><code>LAMMPS.scatter!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">scatter!(lmp::LMP, name::String, data::AbstractVecOrMat{T}, ids::Union{Nothing, Array{Int32}}=nothing) where T&lt;:Union{Int32, Float64}</code></pre><p>Scatter the named per-atom, per-atom fix, per-atom compute, or fix property/atom-based entity in data to all processes. By default (when <code>ids=nothing</code>), this method scatters data to all atoms in consecutive order according to their IDs. The optional parameter <code>ids</code> determines to which subset of atoms the data will be scattered.</p><p>Compute entities have the prefix <code>c_</code>, fix entities use the prefix <code>f_</code>, and per-atom entites have no prefix.</p><div class="admonition is-warning" id="ids-7af60a7f03d945d9"><header class="admonition-header">ids<a class="admonition-anchor" href="#ids-7af60a7f03d945d9" title="Permalink"></a></header><div class="admonition-body"><p>The optional parameter <code>ids</code> only works, if there is a map defined. For example by doing: <code>command(lmp, &quot;atom_modify map yes&quot;)</code> However, LAMMPS only issues a warning if that&#39;s the case, which unfortuately cannot be detected through the underlying API. Starting form LAMMPS version <code>17 Apr 2024</code> this should no longer be an issue, as LAMMPS then throws an error instead of a warning.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L819-L833">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.set_energy!-Tuple{FixExternal, AbstractVector{Float64}}" href="#LAMMPS.set_energy!-Tuple{FixExternal, AbstractVector{Float64}}"><code>LAMMPS.set_energy!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_energy!(fix::FixExternal, energy::AbstractVector{Float64}; set_global=false)</code></pre><p>Sets the contribution to the local per-atom and total global energy resulting from the <code>FixExternal</code>. This function should only be used within the callback of the <code>FixExternal</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/external.jl#L135-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.set_library!-Tuple{Any}" href="#LAMMPS.set_library!-Tuple{Any}"><code>LAMMPS.set_library!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_library!(path)</code></pre><p>Change the library path used by LAMMPS.jl for <code>liblammps.so</code> to <code>path</code>.</p><div class="admonition is-info" id="Note-5b5ee82062e5009"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-5b5ee82062e5009" title="Permalink"></a></header><div class="admonition-body"><p>You will need to restart Julia to use the new library.</p></div></div><div class="admonition is-warning" id="Warning-b87009878eefb39b"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-b87009878eefb39b" title="Permalink"></a></header><div class="admonition-body"><p>Due to a bug in Julia (until 1.6.5 and 1.7.1), setting preferences in transitive dependencies is broken (https://github.com/JuliaPackaging/Preferences.jl/issues/24). To fix this either update your version of Julia, or add LAMMPS_jll as a direct dependency to your project.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/LAMMPS.jl#L130-L142">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LAMMPS.set_virial!-Tuple{FixExternal, AbstractVector{StaticArraysCore.SVector{6, Float64}}}" href="#LAMMPS.set_virial!-Tuple{FixExternal, AbstractVector{StaticArraysCore.SVector{6, Float64}}}"><code>LAMMPS.set_virial!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_virial!(fix::FixExternal, virial_peratom::AbstractVector{SVector{6, Float64}})
set_virial!(fix::FixExternal, virial_peratom::AbstractMatrix{Float64})</code></pre><p>Sets the contribution to the local per-atom and total global virial stress tensors resulting from the <code>FixExternal</code>. This function should only be used within the callback of the <code>FixExternal</code></p><p>The virial tensor is represented as a 6-component vector with the order:    <code>[xx, yy, zz, xy, xz, yz]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cesmix-mit/LAMMPS.jl/blob/1a07fd741a27feacbbdf2c0e47017e3af8815f09/src/external.jl#L96-L105">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../generated/fitting_snap/">« Fitting SNAP</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 15 August 2025 20:50">Friday 15 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
